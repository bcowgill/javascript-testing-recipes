<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>jstest</title>
	</head>
	<body>

		<script src="../../node_modules/jstest/jstest.js"></script>

		<script>
			// Setups for adding skip functionality to jstest
			var skip = function (description, fn) {
				console.info("skip test: " + description, fn)
			}
			var skipSuite = function (description, fn) {
				console.info("skip suite: " + description)
			}
			skip.it = skip
			JS.Test.describe.skip = skipSuite
			// call within each describe block to support it.skip()
			var addSkip = function (suite) {
				// console.log("addSkip suite", suite)
				suite.it.skip = skip
			}
			// it.only didn't work out. solution use perl to mark all tests as skip.it
			// then remove the skip. on only the test to run:
			// perl -i.bak -pne 's{\b i t (\s* \()}{skip.it$1}xmsg' ...
			// perl -i.bak -pne 's{\b skip\.i t (\s* \()}{it$1}xmsg' ...

			with (JS.Test) {
				describe("Hello, world!", function () { with (this) { addSkip(this)
					// console.log("describe", this)
					it("runs a test", function () { with (this) {
						// console.log("it", this)
						assertEqual( "Hello, world!", ["Hello", "world!"].join(", ") )
					}})
					it("a pending test, no function yet") // jstest will not run this, nor tell you it even exists
					it.skip("skip a pending test, no function yet") // will show in console.info
					it.skip("skip a test", function () { with (this) {
						assertEqual( "Hello, world!", ["Hello", "world!"].join(", ") )
					}})
/*
					it.only("only run this test", function () {
						console.log("it.only", this)
						with (this) {
						assertEqual( "Hello, world!", ["Hello", "world!"].join(", ") )
					}})
*/
/*
					it("fails a test", function () { with (this) {
						assertEqual( "Hello, world!", ["Hello", "world!"].join(",  ") )
					}})
*/
				}})
				describe.skip("A suite to skip", function () { with (this) { addSkip(this)
					it("a test will be skipped", function () { with (this) {
						assertEqual(false, true)
					}})
				}})
				autorun()
			}
		</script>

	</body>
</html>

